<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GitHub自动化字符串更新工具</title>
  <!-- 预连接关键外部域名 -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
  
  <!-- 预加载关键CSS资源 -->
  <link rel="preload" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <noscript><link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet"></noscript>
  <!-- 使用压缩后的CSS文件，提升加载性能 -->
  <link rel="preload" href="utils/styles.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <noscript><link href="utils/styles.min.css" rel="stylesheet"></noscript>
  <!-- 回退到原始CSS文件，确保兼容性 -->
  <link href="utils/styles.css" rel="stylesheet" media="print" onload="this.media='all'">
<meta name="version" content="null">
</head>

<body class="font-inter bg-gray-50 min-h-screen flex flex-col">
  <!-- 顶部导航栏 -->
  <header class="navbar bg-white shadow-md py-4 px-6 sticky top-0 z-50 transition-all duration-300">
    <div class="container mx-auto">
      <div class="flex items-center justify-between">
        <div class="flex items-center space-x-3">
          <a href="#" class="navbar-brand">
            <div class="bg-primary-container p-2 rounded-lg">
              <i class="fa fa-code-fork text-primary text-2xl"></i>
            </div>
            <div class="flex flex-col sm:flex-row sm:items-center gap-1">
              <h1 class="text-xl md:text-2xl font-bold text-dark">GitHub自动化字符串更新工具</h1>
              <span class="text-sm text-gray-500 bg-gray-100 px-2 py-0.5 rounded">v1.8.23</span>
            </div>
          </a>
        </div>
        <nav>
          <ul class="navbar-nav flex items-center space-x-4">
            <li class="nav-item">
              <button id="saveConfigBtn" type="button"
                class="nav-link btn-hover bg-secondary text-white px-4 py-2 rounded-md flex items-center shadow-button">
                <i class="fa fa-code mr-2"></i>用户脚本设置
              </button>
            </li>
            <li class="nav-item">
              <button id="helpBtn" type="button"
                class="nav-link btn-hover bg-gray-200 text-gray-700 px-4 py-2 rounded-md flex items-center shadow-button hover:bg-gray-300">
                <i class="fa fa-question-circle mr-2"></i>帮助
              </button>
            </li>
          </ul>
        </nav>
      </div>
    </div>
  </header>

  <!-- 主要内容区 -->
  <main class="flex-grow container mx-auto py-8 px-4">
    <!-- 状态卡片 -->
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-8">
      <div class="stats-card">
        <div class="stats-card-header">
          <div>
            <p class="stats-card-title">已提取字符串</p>
            <p id="extractedCount" class="stats-card-value">0</p>
          </div>
          <div class="stats-card-icon" style="background-color: var(--color-primary);">
            <i class="fa fa-file-text-o text-xl"></i>
          </div>
        </div>
      </div>
      <div class="stats-card">
        <div class="stats-card-header">
          <div>
            <p class="stats-card-title">新添加字符串</p>
            <p id="addedCount" class="stats-card-value">0</p>
          </div>
          <div class="stats-card-icon" style="background-color: var(--color-secondary);">
            <i class="fa fa-plus-circle text-xl"></i>
          </div>
        </div>
      </div>
      <div class="stats-card">
        <div class="stats-card-header">
          <div>
            <p class="stats-card-title">已存在字符串</p>
            <p id="existingCount" class="stats-card-value">0</p>
          </div>
          <div class="stats-card-icon" style="background-color: var(--color-success);">
            <i class="fa fa-database text-xl"></i>
          </div>
        </div>
      </div>
      <div class="stats-card">
        <div class="stats-card-header">
          <div>
            <p class="stats-card-title">上次更新</p>
            <p id="lastUpdate" class="stats-card-value">从未</p>
          </div>
          <div class="stats-card-icon" style="background-color: var(--color-accent);">
            <i class="fa fa-clock-o text-xl"></i>
          </div>
        </div>
      </div>
    </div>

    <!-- 主要操作区 -->
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
      <!-- 左侧配置区域 -->
      <div class="lg:col-span-2 space-y-6">
        <!-- 配置与页面设置选项卡容器 -->
        <div class="bg-white rounded-xl overflow-hidden card-shadow border border-gray-100">
          <!-- 选项卡导航 -->
          <div class="tabs">
            <button id="tabConfig" class="tab active" role="tab">
              <i class="fa fa-cog mr-2"></i>配置设置
            </button>
            <button id="tabPages" class="tab" role="tab">
              <i class="fa fa-globe mr-2"></i>GitHub页面配置
            </button>
          </div>

          <!-- 选项卡内容区域 -->
          <div class="tab-content">
            <!-- 配置设置选项卡内容 -->
            <div id="tabConfigContent" class="tab-pane p-6" role="tabpanel">
              <div class="flex flex-col md:flex-row md:justify-between md:items-center gap-4 mb-6">
                <div class="flex items-center space-x-4">
                  <div class="flex items-center space-x-2">
                    <span class="text-sm text-gray-700">简单模式</span>
                    <label class="relative inline-flex items-center cursor-pointer toggle-switch">
                      <input type="checkbox" id="advancedModeToggle" class="sr-only">
                      <div class="toggle-bg w-12 h-6 bg-gray-200 rounded-full transition-colors duration-300 ease-in-out"></div>
                      <div class="toggle-dot absolute left-0.5 top-0.5 w-5 h-5 bg-white rounded-full shadow transition-transform duration-300 ease-in-out"></div>
                    </label>
                    <span class="text-sm text-gray-700">高级模式</span>
                  </div>
                </div>
                <div class="flex items-center space-x-3">
                  <button id="resetConfigBtn" type="button"
                    class="text-gray-500 hover:text-gray-700 text-sm transition-colors">
                    <i class="fa fa-refresh mr-1"></i>重置
                  </button>
                  <button id="saveSettingsBtn" type="button"
                    class="bg-secondary hover:bg-secondary/90 text-white px-4 py-2 rounded-md text-sm btn-hover shadow-button">
                    <i class="fa fa-save mr-1"></i>保存
                  </button>
                </div>
              </div>

              <!-- 基本设置 - 简单模式和高级模式都显示 -->
              <div class="mb-6 fade-in">
                <h3 class="text-md font-medium text-gray-700 mb-4 flex items-center">
                  <i class="fa fa-sliders mr-2 text-primary"></i>基本设置
                </h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                  <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">用户脚本路径</label>
                    <input type="text" id="userScriptPath"
                      class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none input-focus"
                      value="../GitHub_zh-CN.user.js">
                  </div>
                  <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">备份目录</label>
                    <input type="text" id="backupDir"
                      class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none input-focus"
                      value="../backups">
                  </div>
                  <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">最小字符串长度</label>
                    <input type="number" id="minStringLength"
                      class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none input-focus"
                      value="2">
                  </div>
                  <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">最大字符串长度</label>
                    <input type="number" id="maxStringLength"
                      class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none input-focus"
                      value="100">
                  </div>
                </div>
              </div>

              <!-- HTTP设置 - 高级模式才显示 -->
              <div class="mb-6 fade-in config-section-advanced hidden">
                <h3 class="text-md font-medium text-gray-700 mb-4 flex items-center">
                  <i class="fa fa-globe mr-2 text-primary"></i>HTTP设置
                </h3>
                <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                  <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">请求超时(ms)</label>
                    <input type="number" id="httpTimeout"
                      class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none input-focus"
                      value="30000">
                  </div>
                  <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">最大重试次数</label>
                    <input type="number" id="maxRetries"
                      class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none input-focus"
                      value="3">
                  </div>
                  <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">重试延迟(ms)</label>
                    <input type="number" id="retryDelay"
                      class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none input-focus"
                      value="2000">
                  </div>
                  <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">请求间隔(ms)</label>
                    <input type="number" id="requestDelay"
                      class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none input-focus"
                      value="1000">
                  </div>
                </div>
                <div class="mt-4">
                  <label class="block text-sm font-medium text-gray-700 mb-1">User-Agent</label>
                  <input type="text" id="userAgent"
                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none input-focus"
                    value="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/119.0.0.0 Safari/537.36">
                </div>
              </div>

              <!-- 字符串匹配设置 - 简单模式显示部分，高级模式显示全部 -->
              <div class="mb-6 fade-in">
                <h3 class="text-md font-medium text-gray-700 mb-4 flex items-center">
                  <i class="fa fa-search mr-2 text-primary"></i>字符串匹配设置
                </h3>
                <div class="flex items-center space-x-2 mb-4">
                  <input type="checkbox" id="exactMatchOnly" class="w-4 h-4 text-primary focus:ring-primary rounded">
                  <label for="exactMatchOnly" class="text-sm font-medium text-gray-700">只翻译全文匹配的字符串</label>
                </div>
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-1">忽略的单词（用逗号分隔）</label>
                  <input type="text" id="ignoreWords"
                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none input-focus"
                    value="GitHub,API,URL,HTTP,HTTPS">
                  <p class="text-xs text-gray-500 mt-1">这些单词出现在任何字符串中时，该字符串将被忽略</p>
                </div>
                <div class="mt-4 config-section-advanced hidden">
                  <label class="block text-sm font-medium text-gray-700 mb-1">忽略的正则表达式模式（一行一个）</label>
                  <textarea id="ignorePatterns"
                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none input-focus h-20"></textarea>
                  <p class="text-xs text-gray-500 mt-1">匹配这些正则表达式的字符串将被忽略</p>
                </div>
                <div class="mt-4 config-section-advanced hidden">
                  <label class="block text-sm font-medium text-gray-700 mb-1">必须包含的正则表达式模式（一行一个）</label>
                  <textarea id="includePatterns"
                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none input-focus h-20"></textarea>
                  <p class="text-xs text-gray-500 mt-1">字符串必须匹配至少一个这些正则表达式才会被提取</p>
                </div>
              </div>

              <!-- 调试设置 - 高级模式才显示 -->
              <div class="fade-in config-section-advanced hidden">
                <h3 class="text-md font-medium text-gray-700 mb-4 flex items-center">
                  <i class="fa fa-bug mr-2 text-primary"></i>调试设置
                </h3>
                <div class="flex items-center space-x-2 mb-4">
                  <input type="checkbox" id="debugMode" class="w-4 h-4 text-primary focus:ring-primary rounded">
                  <label for="debugMode" class="text-sm font-medium text-gray-700">启用调试模式</label>
                </div>
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-1">调试输出文件</label>
                  <input type="text" id="debugOutputFile"
                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none input-focus"
                    value="../debug/fetched_strings.json">
                </div>
              </div>
            </div>

            <!-- GitHub页面配置选项卡内容 -->
          <div id="tabPagesContent" class="tab-pane p-6 hidden" role="tabpanel">
            <div class="flex justify-between items-center mb-4">
              <h2 class="text-lg font-semibold text-gray-800">GitHub页面配置</h2>
              <div class="flex space-x-2">
                <button id="addPageBtn" type="button"
                  class="bg-primary hover:bg-primary/90 text-white px-4 py-2 rounded-md text-sm btn-hover shadow-button">
                  <i class="fa fa-plus mr-1"></i>添加页面
                </button>
                <button id="savePagesBtn" type="button"
                  class="bg-secondary hover:bg-secondary/90 text-white px-4 py-2 rounded-md text-sm btn-hover shadow-button">
                  <i class="fa fa-save mr-1"></i>保存
                </button>
              </div>
            </div>
            
            <!-- 搜索框和批量操作 -->
              <div class="flex flex-col sm:flex-row sm:justify-between sm:items-center mb-6 gap-4">
                <!-- 搜索框 -->
                <div class="relative w-full flex-grow">
                  <div class="relative flex items-center">
                    <div class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none">
                      <i class="fa fa-search text-gray-400 transition-colors duration-300 group-hover:text-secondary"></i>
                    </div>
                    <input type="text" id="pagesSearch" placeholder="搜索URL..." 
                      class="w-full px-4 py-2.5 pl-10 pr-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-secondary/30 focus:border-secondary input-focus transition-all duration-300 group">
                    <button id="clearSearchBtn" type="button" class="absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400 hover:text-gray-600 transition-colors duration-300 opacity-0 pointer-events-none" aria-label="清除搜索">
                      <i class="fa fa-times-circle"></i>
                    </button>
                  </div>
                  <!-- 搜索建议容器 -->
                  <div id="searchSuggestions" class="absolute z-10 mt-1 w-full bg-white rounded-lg shadow-lg border border-gray-200 max-h-60 overflow-y-auto hidden search-suggestions">
                    <!-- 搜索建议将通过JavaScript动态添加 -->
                  </div>
                </div>
                
                <!-- 批量操作按钮组 -->
                <div class="flex items-center space-x-2">
                  <!-- 批量操作下拉菜单 -->
                  <div class="relative group">
                    <button id="batchOperationsBtn" type="button" 
                      class="flex items-center px-4 py-2.5 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg text-sm transition-colors duration-300">
                      <i class="fa fa-cog mr-2"></i>批量操作
                      <i class="fa fa-chevron-down ml-2 text-xs transition-transform duration-300 group-hover:rotate-180"></i>
                    </button>
                    <!-- 下拉菜单 -->
                    <div id="batchOperationsMenu" class="absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 overflow-hidden hidden batch-menu animate-fadeIn">
                      <button id="importPagesBtn" type="button" 
                        class="w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors flex items-center">
                        <i class="fa fa-upload w-5 text-center mr-2 text-secondary"></i>导入配置
                      </button>
                      <button id="exportPagesBtn" type="button" 
                        class="w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors flex items-center">
                        <i class="fa fa-download w-5 text-center mr-2 text-secondary"></i>导出配置
                      </button>
                      <div class="border-t border-gray-200 my-1"></div>
                      <button id="deleteSelectedPagesBtn" type="button" 
                        class="w-full text-left px-4 py-2 text-sm text-danger hover:bg-red-50 transition-colors flex items-center" disabled>
                        <i class="fa fa-trash w-5 text-center mr-2"></i>删除所选
                      </button>
                    </div>
                  </div>
                </div>
              </div>

            <div class="overflow-x-auto shadow-sm rounded-lg">
              <table class="min-w-full divide-y divide-gray-200">
                <thead class="bg-gray-50">
                  <tr>
                    <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-10">
                      <input type="checkbox" id="selectAllPages" class="rounded border-gray-300 text-primary focus:ring-primary/50">
                    </th>
                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer sortable-column" data-sort="url" style="width: 45%;">
                      URL
                      <i class="fa fa-sort ml-1 text-gray-400"></i>
                    </th>
                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer sortable-column" data-sort="selector" style="width: 25%;">
                      选择器
                      <i class="fa fa-sort ml-1 text-gray-400"></i>
                    </th>
                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer sortable-column" data-sort="module" style="width: 20%;">
                      模块
                      <i class="fa fa-sort ml-1 text-gray-400"></i>
                    </th>
                    <th scope="col"
                      class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider" style="width: 10%;">操作</th>
                  </tr>
                </thead>
                <tbody id="pagesTableBody" class="bg-white divide-y divide-gray-200">
                    <tr data-index="0" class="hover:bg-gray-50 transition-colors">
                      <td class="px-6 py-4 text-sm text-gray-900">
                        <div class="flex items-center">
                          <input type="checkbox" class="page-checkbox rounded border-gray-300 text-primary focus:ring-primary/50 mr-3">
                          <div class="max-w-md overflow-hidden text-ellipsis whitespace-nowrap relative" title="https://github.com">
                            https://github.com
                          </div>
                          <button class="ml-2 text-gray-400 hover:text-primary copy-url" data-url="https://github.com">
                            <i class="fa fa-copy"></i>
                          </button>
                        </div>
                      </td>
                      <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">body</td>
                      <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">global</td>
                      <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                        <button type="button"
                          class="text-primary hover:text-primary/80 mr-3 edit-page transition-colors" aria-label="编辑">
                          <i class="fa fa-pencil"></i>
                        </button>
                        <button type="button" class="text-danger hover:text-danger/80 delete-page transition-colors"
                          aria-label="删除">
                          <i class="fa fa-trash"></i>
                        </button>
                        <button type="button" class="text-secondary hover:text-secondary/80 ml-3 test-page transition-colors"
                          aria-label="测试" data-url="https://github.com">
                          <i class="fa fa-external-link"></i>
                        </button>
                      </td>
                    </tr>
                    <tr data-index="1" class="hover:bg-gray-50 transition-colors">
                      <td class="px-6 py-4 text-sm text-gray-900">
                        <div class="flex items-center">
                          <input type="checkbox" class="page-checkbox rounded border-gray-300 text-primary focus:ring-primary/50 mr-3">
                          <div class="max-w-md overflow-hidden text-ellipsis whitespace-nowrap relative" title="https://github.com/settings/profile">
                            https://github.com/settings/profile
                          </div>
                          <button class="ml-2 text-gray-400 hover:text-primary copy-url" data-url="https://github.com/settings/profile">
                            <i class="fa fa-copy"></i>
                          </button>
                        </div>
                      </td>
                      <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">body</td>
                      <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">settings</td>
                      <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                        <button type="button"
                          class="text-primary hover:text-primary/80 mr-3 edit-page transition-colors" aria-label="编辑">
                          <i class="fa fa-pencil"></i>
                        </button>
                        <button type="button" class="text-danger hover:text-danger/80 delete-page transition-colors"
                          aria-label="删除">
                          <i class="fa fa-trash"></i>
                        </button>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
              <div class="px-6 py-4 bg-gray-50 border-t border-gray-200">
                <p class="text-sm text-gray-500">总共 <span id="pagesCount">2</span> 个页面</p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- 右侧操作和日志区域 -->
      <div id="rightSidebar" class="space-y-6">
        <!-- 操作按钮 -->
        <div class="bg-white rounded-xl p-6 card-shadow border border-gray-100">
          <h2 class="text-lg font-semibold text-dark mb-4 flex items-center">
            <i class="fa fa-cog mr-2 text-primary"></i>操作控制
          </h2>
          <div class="space-y-3">
            <button id="toggleBtn" type="button"
              class="w-full bg-primary hover:bg-primary/90 text-white px-4 py-3 rounded-md font-medium flex items-center justify-center btn-hover shadow-button">
              <i class="fa fa-play mr-2"></i>开始抓取字符串
            </button>
            <button id="addStringBtn" type="button"
              class="w-full bg-secondary hover:bg-secondary/90 text-white px-4 py-3 rounded-md font-medium flex items-center justify-center btn-hover shadow-button">
              <i class="fa fa-plus mr-2"></i>添加字符串到词典
            </button>
            <button id="viewBackupBtn" type="button"
              class="w-full bg-gray-200 hover:bg-gray-300 text-gray-800 px-4 py-3 rounded-md font-medium flex items-center justify-center btn-hover shadow-button">
              <i class="fa fa-folder-open mr-2"></i>查看备份
            </button>
            <button id="resetStatusBtn" type="button"
              class="w-full bg-warning hover:bg-warning/90 active:bg-warning/80 text-white px-4 py-3 rounded-md font-medium flex items-center justify-center btn-hover shadow-button transition-all duration-300 group relative overflow-hidden">
              <span
                class="absolute inset-0 bg-white opacity-0 group-hover:opacity-10 transition-opacity duration-300"></span>
              <i class="fa fa-refresh mr-2 group-hover:rotate-180 transition-transform duration-500 ease-in-out"></i>
              <span>重置工具状态</span>
            </button>
          </div>
          <div class="mt-6">
            <h3 class="text-sm font-medium text-gray-700 mb-2">运行状态</h3>
            <div class="flex items-center space-x-2">
              <div id="statusIndicator" class="w-3 h-3 rounded-full bg-gray-300 transition-all duration-300"></div>
              <span id="statusText" class="text-sm text-gray-500">就绪</span>
            </div>
          </div>

          <!-- 进度条 -->
          <div class="mt-6">
            <h3 class="text-sm font-medium text-gray-700 mb-2">进度</h3>
            <div class="w-full bg-gray-200 rounded-full h-2.5">
              <div id="progressBar" class="bg-secondary h-2.5 rounded-full w-0 progress-bar"></div>
            </div>
            <div class="flex justify-between mt-1">
              <span id="progressText" class="text-xs text-gray-500">0%</span>
              <span id="progressDetails" class="text-xs text-gray-500">0/0 页面</span>
            </div>
          </div>
        </div>

        <!-- 日志区域 -->
        <div class="bg-white rounded-xl overflow-hidden card-shadow border border-gray-100">
          <div class="bg-dark text-white px-6 py-4 flex justify-between items-center">
            <h2 class="text-lg font-semibold flex items-center gap-2">
              <i class="fa fa-terminal" aria-hidden="true"></i>
              <span>运行日志</span>
            </h2>
            <button id="clearLogBtn" type="button" class="text-white/70 hover:text-white text-sm transition-colors">
              <i class="fa fa-trash mr-1"></i>清空
            </button>
          </div>
          <div class="p-4">
            <div class="relative log-container-wrapper">
              <div id="logContainer"
                class="h-80 overflow-y-auto bg-gray-50 p-3 rounded-md log-text font-mono space-y-1 shadow-inner">
                <!-- 初始欢迎日志 -->
                <div class="log-entry log-info">
                  <span class="log-time">[00:00:00]</span>
                  <span class="log-message">
                    <i class="fa fa-info-circle mr-2" aria-hidden="true"></i>
                    工具已启动，准备就绪
                  </span>
                </div>
              </div>
              <div class="absolute top-3 right-3 flex gap-2">
                <button id="filterLogInfo" class="p-1.5 rounded-md bg-gray-200 bg-opacity-70 hover:bg-opacity-100 text-gray-600 transition-all" title="显示信息日志">
                  <i class="fa fa-info-circle" aria-hidden="true"></i>
                </button>
                <button id="filterLogSuccess" class="p-1.5 rounded-md bg-green-100 bg-opacity-70 hover:bg-opacity-100 text-green-600 transition-all" title="显示成功日志">
                  <i class="fa fa-check-circle" aria-hidden="true"></i>
                </button>
                <button id="filterLogWarning" class="p-1.5 rounded-md bg-yellow-100 bg-opacity-70 hover:bg-opacity-100 text-yellow-600 transition-all" title="显示警告日志">
                  <i class="fa fa-exclamation-triangle" aria-hidden="true"></i>
                </button>
                <button id="filterLogError" class="p-1.5 rounded-md bg-red-100 bg-opacity-70 hover:bg-opacity-100 text-red-600 transition-all" title="显示错误日志">
                  <i class="fa fa-times-circle" aria-hidden="true"></i>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- 页脚 -->
  <footer class="bg-dark text-white/70 py-6 px-4">
    <div class="container mx-auto flex flex-col md:flex-row justify-between items-center">
      <div class="mb-4 md:mb-0">
        <p>GitHub自动化字符串更新工具 - 作者: SutChan</p>
      </div>
      <div class="flex space-x-4">
        <a href="#" class="hover:text-white transition-colors" aria-label="GitHub"><i
            class="fa fa-github text-xl"></i></a>
        <a href="#" class="hover:text-white transition-colors" aria-label="邮箱"><i
            class="fa fa-envelope text-xl"></i></a>
        <a href="#" id="userScriptSettingsBtn" class="hover:text-white transition-colors" aria-label="用户脚本设置"><i
            class="fa fa-code text-xl"></i></a>
        <a href="#" id="helpBtn" class="hover:text-white transition-colors" aria-label="帮助"><i
            class="fa fa-question-circle text-xl"></i></a>
      </div>
    </div>
  </footer>

  <!-- 添加/编辑页面对话框 -->
  <div id="pageModal" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 hidden modal-backdrop">
    <div class="bg-white rounded-xl p-6 w-full max-w-md mx-4 card-shadow modal-content">
      <div class="modal-header flex justify-between items-center mb-4">
        <h3 class="text-lg font-semibold text-dark" id="modalTitle">添加GitHub页面</h3>
        <button id="closeModalBtn" type="button" class="text-gray-400 hover:text-gray-500 transition-colors" aria-label="关闭">
          <i class="fa fa-times text-xl"></i>
        </button>
      </div>
      <div class="modal-body space-y-4">
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">URL</label>
          <input type="text" id="pageUrl"
            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none input-focus"
            placeholder="https://github.com/...">
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">选择器</label>
          <input type="text" id="pageSelector"
            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none input-focus"
            placeholder="body">
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">模块</label>
          <input type="text" id="pageModule"
            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none input-focus"
            placeholder="global">
        </div>
      </div>
      <div class="modal-footer mt-6 flex justify-end space-x-3">
        <button id="cancelModalBtn" type="button"
          class="px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors">取消</button>
        <button id="saveModalBtn" type="button"
          class="px-4 py-2 bg-primary text-white rounded-md hover:bg-primary/90 transition-colors">保存</button>
      </div>
    </div>
  </div>

  <!-- 帮助对话框 -->
  <div id="helpModal" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 hidden modal-backdrop">
    <div class="bg-white rounded-xl p-6 w-full max-w-md mx-4 card-shadow modal-content" style="max-width: 800px;">
      <div class="modal-header flex justify-between items-center mb-4">
        <h3 class="text-lg font-semibold text-dark modal-title">使用帮助</h3>
        <button type="button" class="text-gray-400 hover:text-gray-500 transition-colors modal-close" id="closeHelpBtn" aria-label="关闭">
          <i class="fa fa-times text-xl"></i>
        </button>
      </div>
      <div class="modal-body">
        <div class="space-y-4">
          <div class="fade-in">
            <h4 class="text-md font-medium text-gray-800 mb-2">工具介绍</h4>
            <p class="text-sm text-gray-600">此工具用于自动化从GitHub网站抓取字符串并更新翻译词典，帮助维护者持续更新GitHub中文翻译词典。</p>
          </div>
          <div class="fade-in">
            <h4 class="text-md font-medium text-gray-800 mb-2">基本使用</h4>
            <ol class="list-decimal list-inside text-sm text-gray-600 space-y-1">
              <li>配置用户脚本路径和其他参数</li>
              <li>添加或编辑需要抓取的GitHub页面</li>
              <li>点击"开始抓取字符串"按钮运行工具</li>
              <li>查看运行日志和结果统计</li>
            </ol>
          </div>
          <div class="fade-in">
            <h4 class="text-md font-medium text-gray-800 mb-2">注意事项</h4>
            <ul class="list-disc list-inside text-sm text-gray-600 space-y-1">
              <li>新添加的字符串会标记为"待翻译:"，需要手动进行翻译</li>
              <li>过度频繁的请求可能会触发GitHub的访问限制</li>
              <li>运行前请确保有足够的文件系统权限</li>
            </ul>
          </div>
        </div>
      </div>
      <div class="modal-footer mt-6 flex justify-end space-x-3">
        <button type="button" class="px-4 py-2 bg-primary text-white rounded-md hover:bg-primary/90 transition-colors" id="closeHelpBtn">关闭</button>
      </div>
    </div>
  </div>

  <!-- 添加字符串模态框 -->
  <div id="addStringModal" class="hidden fixed inset-0 bg-black/50 flex items-center justify-center z-50 modal-backdrop">
    <div class="bg-white rounded-xl p-6 w-full max-w-md mx-4 card-shadow modal-content">
      <div class="modal-header flex justify-between items-center mb-4">
        <h3 class="text-lg font-semibold text-dark modal-title">添加字符串到翻译词典</h3>
        <button id="closeAddStringModalBtn" type="button" class="text-gray-400 hover:text-gray-500 transition-colors modal-close" aria-label="关闭">
          <i class="fa fa-times text-xl"></i>
        </button>
      </div>
            <div class="modal-body">
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">原始字符串</label>
                        <input type="text" id="originalString"
                            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none input-focus" placeholder="请输入要翻译的原始英文字符串">
                        <p id="originalStringError" class="mt-1 text-xs text-danger hidden">请输入原始字符串</p>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">翻译模块</label>
                        <select id="stringModule" 
                            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none input-focus">
                            <option value="global">global (全局模块)</option>
                            <option value="header">header (顶部导航)</option>
                            <option value="footer">footer (页脚)</option>
                            <option value="buttons">buttons (按钮文本)</option>
                            <option value="labels">labels (标签文本)</option>
                            <option value="messages">messages (提示消息)</option>
                            <option value="settings">settings (设置页面)</option>
                            <option value="search">search (搜索功能)</option>
                            <option value="repository">repository (仓库页面)</option>
                            <option value="issues">issues (问题页面)</option>
                            <option value="pulls">pulls (拉取请求)</option>
                            <option value="actions">actions (Actions)</option>
                            <option value="marketplace">marketplace (Marketplace)</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">中文翻译</label>
                        <textarea id="translatedString"
                            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none input-focus min-h-[100px]"
                            placeholder="请输入中文翻译（可选，留空将标记为待翻译）"></textarea>
                    </div>
                    <div class="flex items-center space-x-2">
                        <input type="checkbox" id="forceUpdate" class="w-4 h-4 text-primary focus:ring-primary rounded">
                        <label for="forceUpdate" class="text-sm font-medium text-gray-700">强制更新（覆盖现有翻译）</label>
                    </div>
                </div>
            </div>
            <div class="modal-footer mt-6 flex justify-end space-x-3">
        <button id="cancelAddStringBtn" type="button"
          class="px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors">取消</button>
        <button id="saveStringBtn" type="button"
          class="px-4 py-2 bg-primary text-white rounded-md hover:bg-primary/90 transition-colors">保存</button>
      </div>
    </div>
  </div>

  <!-- 用户脚本设置模态框 -->
  <div id="userScriptSettingsModal" class="hidden fixed inset-0 bg-black/50 flex items-center justify-center z-50 modal-backdrop">
    <div class="bg-white rounded-xl p-6 w-full max-w-md mx-4 card-shadow modal-content max-w-2xl max-h-[90vh] overflow-y-auto">
      <div class="modal-header flex justify-between items-center mb-4">
        <h3 class="text-lg font-semibold text-dark modal-title">用户脚本设置</h3>
        <button id="closeUserScriptModalBtn" type="button" class="text-gray-400 hover:text-gray-500 transition-colors modal-close" aria-label="关闭">
          <i class="fa fa-times text-xl"></i>
        </button>
      </div>
      <div class="modal-body">
      <div id="userScriptSettings" class="space-y-4">
        <!-- 外部翻译设置 -->
        <div class="bg-gray-50 p-4 rounded-lg">
          <h4 class="text-sm font-medium text-gray-700 mb-3">外部翻译配置</h4>
          <div class="flex items-center space-x-2 mb-4">
            <input type="checkbox" id="scriptExternalTranslation"
              class="w-4 h-4 text-primary focus:ring-primary rounded">
            <label for="scriptExternalTranslation" class="text-sm font-medium text-gray-700">启用外部翻译</label>
          </div>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">最小翻译长度</label>
              <input type="number" id="scriptMinTranslationLength"
                class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none input-focus" value="20">
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">最大翻译长度</label>
              <input type="number" id="scriptMaxTranslationLength"
                class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none input-focus" value="500">
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">翻译超时(ms)</label>
              <input type="number" id="scriptTranslationTimeout"
                class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none input-focus" value="3000">
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">请求间隔(ms)</label>
              <input type="number" id="scriptRequestDelay"
                class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none input-focus" value="500">
            </div>
          </div>
        </div>

        <!-- 脚本行为设置 -->
        <div>
          <h4 class="text-sm font-medium text-gray-700 mb-3">脚本行为配置</h4>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">路由变化延迟(ms)</label>
              <input type="number" id="scriptRouteChangeDelay"
                class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none input-focus" value="500">
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">节流间隔(ms)</label>
              <input type="number" id="scriptThrottleInterval"
                class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none input-focus" value="100">
            </div>
          </div>
          <div class="mt-4 flex items-center space-x-2">
            <input type="checkbox" id="scriptCheckUpdate" class="w-4 h-4 text-primary focus:ring-primary rounded">
            <label for="scriptCheckUpdate" class="text-sm font-medium text-gray-700">启用更新检测</label>
          </div>
          <div class="mt-4 flex items-center space-x-2">
            <input type="checkbox" id="scriptEnableDeepObserver"
              class="w-4 h-4 text-primary focus:ring-primary rounded">
            <label for="scriptEnableDeepObserver" class="text-sm font-medium text-gray-700">启用深度DOM观察</label>
          </div>
        </div>
      </div>
  </div>
  <div class="modal-footer mt-6 flex justify-end space-x-3">
    <button id="cancelUserScriptSettingsBtn" type="button"
      class="px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors">取消</button>
    <button id="resetUserScriptConfigBtn" type="button"
      class="px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors">
      <i class="fa fa-refresh mr-1"></i>重置
    </button>
    <button id="saveUserScriptSettingsBtn" type="button"
      class="px-4 py-2 bg-primary text-white rounded-md hover:bg-primary/90 transition-colors">
      <i class="fa fa-save mr-1"></i>保存
    </button>
  </div>
</div>
</div>

  <!-- 引入JavaScript文件 - 添加defer属性以异步加载，不阻塞页面渲染 -->
  <script src="utils/auto_string_updater.js" defer></script>
  <script src="utils/dictionary_processor.js" defer></script>
  <script src="utils/app.js" defer></script>

</body>

</html>
