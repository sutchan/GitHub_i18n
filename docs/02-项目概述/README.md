# GitHub i18n 项目概述

## 项目背景

在全球化的软件开发环境中，语言障碍常常成为技术交流和学习的阻碍。GitHub作为全球最大的代码托管平台，虽然提供了丰富的功能和资源，但其英文界面对于非英语母语的开发者，特别是中文开发者而言，可能造成一定的使用门槛。

尽管浏览器提供了页面翻译功能，但这类通用翻译往往缺乏专业术语准确性，可能导致技术概念误解；同时，自动翻译可能会破坏页面布局，影响用户体验。因此，开发一款专门针对GitHub平台的精准中文翻译插件显得尤为必要。

## 项目目标

GitHub i18n项目旨在通过以下方式提升中文开发者的GitHub使用体验：

1. **提供专业精准的中文翻译**：针对GitHub特有的技术术语和界面元素，提供经过人工校对的专业翻译
2. **保持页面布局完整性**：确保翻译过程不会破坏GitHub原有的页面结构和交互体验
3. **实现零延迟翻译**：通过本地词典和缓存机制，实现即时翻译，无需等待网络请求
4. **覆盖全站高频UI元素**：确保GitHub核心功能和常用界面都能得到有效翻译
5. **支持动态内容**：适应GitHub的单页应用架构，确保动态加载的内容也能被正确翻译

## 项目简介

GitHub i18n 是一个为 GitHub 网站提供中文翻译的浏览器用户脚本，旨在提升中文用户的使用体验，同时保持页面布局不变和翻译零延迟。本项目包含两个核心组件：

1. **GitHub_zh-CN.user.js** - 用户脚本，为 GitHub 全站高频 UI 提供精准中文翻译，**不破坏任何布局**
2. **自动化字符串更新工具** - 从 GitHub 页面抓取新字符串并更新翻译词典

## 核心特性

### 用户脚本特性

- ✅ **全站覆盖**：支持仓库、仪表盘、设置、组织、通知、Codespaces、Issues、PR 等所有页面
- 🧱 **布局安全**：仅替换文本节点，**绝不修改 DOM 结构**，彻底避免菜单错位、按钮堆叠、垂直排列等问题
- ⚡ **零延迟加载**：无网络请求，本地词典即时生效，页面秒级翻译
- 🔁 **动态兼容**：完美支持 GitHub 的 SPA 路由、AJAX 内容、下拉菜单和懒加载区域
- 📚 **完整词典**：内置大量高频术语，覆盖导航、操作、设置、安全、账单等核心场景
- 🔄 **自动更新**：安装后可自动检测并提示新版本（需 Tampermonkey 支持）
- 🚀 **性能优化**：采用缓存策略、模块化设计和按需加载，确保流畅的用户体验
- 🎯 **精准匹配**：智能的正则表达式处理和安全转义，避免翻译错误

### 自动化工具特性

- 🤖 **自动抓取**：从多个 GitHub 核心页面自动抓取文本字符串
- 🔢 **智能分类**：根据页面类型将字符串智能分类到相应模块
- ⚙️ **自动更新**：自动更新翻译词典，避免重复添加已存在的字符串
- 💾 **自动备份**：自动备份原始文件，确保安全
- 🔄 **版本管理**：自动升级版本号

## 技术栈选型

### 核心技术栈

- **主语言**：JavaScript (ES6+)
  - **选型理由**：作为Web前端的标准语言，JavaScript提供了强大的DOM操作能力，非常适合开发浏览器用户脚本。ES6+语法特性（如箭头函数、Promise、模块系统等）提高了代码的可读性和可维护性。

- **目标平台**：浏览器 (作为用户脚本运行)
  - **选型理由**：用户脚本可以直接在浏览器环境中运行，无需额外的安装过程，降低了用户的使用门槛。同时，用户脚本可以访问页面DOM，实现内容翻译功能。

- **构建工具**：Node.js
  - **选型理由**：Node.js提供了强大的文件操作和构建能力，便于开发自动化字符串更新工具和打包用户脚本。

- **依赖管理**：npm
  - **选型理由**：作为JavaScript生态系统的标准包管理器，npm提供了丰富的第三方库资源和便捷的依赖管理功能。

- **测试框架**：Jest
  - **选型理由**：Jest提供了简洁的API和丰富的测试功能，支持单元测试和集成测试，便于确保代码质量。

### 核心API和技术

- **MutationObserver API**
  - **选型理由**：用于高效监听DOM变化，实现对GitHub动态加载内容的实时翻译，避免了使用性能较差的轮询方式。

- **Web Storage API (localStorage/sessionStorage)**
  - **选型理由**：用于存储用户配置和翻译缓存，提高翻译效率并支持个性化设置。

- **用户脚本管理器API**
  - **选型理由**：利用Tampermonkey等用户脚本管理器提供的API，实现脚本自动更新和元数据管理。

- **模块化设计模式**
  - **选型理由**：将翻译逻辑、页面监控、版本检查等功能分离为独立模块，提高代码的可维护性和可扩展性。

- **缓存优化策略**
  - **选型理由**：通过实现多级缓存机制，显著提高翻译性能，减少不必要的重复翻译操作。

## 快速开始

1. 安装 [Tampermonkey](https://www.tampermonkey.net/) 浏览器扩展
2. 点击 [安装最新版脚本](https://github.com/sutchan/GitHub_i18n/raw/main/GitHub_zh-CN.user.js)
3. 刷新任意 GitHub 页面，即可看到中文界面

## 系统架构设计

### 整体架构图

```
┌─────────────────────────────────────────────────────────────────┐
│                      GitHub网站页面                             │
└───────────────────────────┬─────────────────────────────────────┘
                            │
                            ▼
┌─────────────────────────────────────────────────────────────────┐
│                      用户脚本入口 (main.js)                      │
└───────────────────────────┬─────────────────────────────────────┘
                            │
        ┌───────────────────┼───────────────────┐
        ▼                   ▼                   ▼
┌─────────────────┐ ┌─────────────────┐ ┌─────────────────┐
│ 翻译核心模块     │ │ 页面监控模块     │ │ 版本检查模块     │
│ translationCore │ │   pageMonitor   │ │ versionChecker  │
└─────────┬───────┘ └─────────┬───────┘ └─────────┬───────┘
          │                   │                   │
          └───────────────────┼───────────────────┘
                              │
                              ▼
                     ┌─────────────────┐
                     │   工具函数模块   │
                     │       utils     │
                     └─────────────────┘
```

### 模块设计与职责

#### 1. 翻译核心模块 (translationCore.js)

**核心职责**：
- 词典管理：加载、初始化和维护翻译词典
- 文本翻译：提供文本翻译的核心功能
- 元素翻译：将DOM元素中的文本内容翻译为中文
- 页面模式检测：识别当前GitHub页面的类型和模式

**关键特性**：
- 模块化词典加载：支持按需加载不同页面类型的词典
- 缓存机制：实现翻译结果缓存，提高性能
- 安全翻译：确保翻译过程不破坏页面结构

#### 2. 页面监控模块 (pageMonitor.js)

**核心职责**：
- DOM变化监听：使用MutationObserver监听页面内容变化
- 智能过滤：过滤不必要的DOM变化，避免重复翻译
- 延迟触发：使用防抖和节流机制优化性能
- 动态翻译：对新添加的DOM元素进行实时翻译

**关键特性**：
- 高效过滤算法：智能判断哪些DOM变化需要触发翻译
- 性能优化：通过多种策略减少不必要的翻译操作
- 页面模式适配：根据不同页面类型调整监控策略

#### 3. 版本检查模块 (versionChecker.js)

**核心职责**：
- 版本信息管理：维护插件当前版本信息
- 更新检查：定期检查是否有新版本发布
- 更新通知：提示用户进行更新

**关键特性**：
- 智能更新检查：避免过于频繁的更新检查
- 用户友好通知：提供清晰的更新信息和操作指引

#### 4. 工具函数模块 (utils.js)

**核心职责**：
- 性能优化：提供防抖、节流等性能优化函数
- DOM操作：提供安全高效的DOM操作工具
- 辅助功能：提供各种辅助函数和工具方法

**关键特性**：
- 可复用性：函数设计注重可复用性和扩展性
- 性能考量：所有工具函数都经过性能优化

### 数据流设计

1. **初始化流程**：
   - 用户脚本加载 → 初始化配置 → 加载词典 → 设置监控器 → 翻译初始页面

2. **实时翻译流程**：
   - DOM变化触发 → 过滤变化 → 提取文本节点 → 查询翻译 → 更新DOM

3. **更新检查流程**：
   - 定时触发 → 获取当前版本 → 检查远程版本 → 比对版本 → 显示更新通知

### 扩展性设计

- **模块化结构**：各功能模块高度解耦，便于独立开发和维护
- **插件机制**：设计了扩展点，允许未来添加新功能和自定义行为
- **配置系统**：支持丰富的配置选项，允许用户自定义翻译行为
- **页面模式**：通过页面模式机制，支持针对不同GitHub页面类型的定制化处理

## 项目文档结构

完整项目文档组织如下：

- **[01-文档指南](../01-文档指南/)** - 文档编写规范和指南
- **[02-项目概述](../02-项目概述/)** - 项目介绍和特性说明
- **[03-安装指南](../03-安装指南/)** - 插件的安装方法和配置说明
- **[04-功能模块](../04-功能模块/)** - 功能使用和配置说明
- **[05-技术文档](../05-技术文档/)** - 核心技术实现和 API 文档
- **[06-用户手册](../06-用户手册/)** - 用户详细使用指南
- **[07-开发者文档](../07-开发者文档/)** - 开发环境搭建和贡献指南
- **[08-部署文档](../08-部署文档/)** - 部署流程和版本更新历史
- **[09-运维文档](../09-运维文档/)** - 项目运维和维护信息
- **[10-附录](../10-附录/)** - 附加文档和参考资料

## 贡献指南

欢迎通过以下方式参与项目：

- 报告问题和建议
- 贡献代码和改进
- 完善翻译词典
- 更新和改进文档

## 版本信息

当前版本：1.8.99 - 最后更新：2024-06-02
作者：Sut
