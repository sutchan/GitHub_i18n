# 贡献指南

## 文档概述

本文档为 GitHub i18n 项目的贡献指南，旨在帮助开发者了解如何参与项目开发、提交代码、报告问题以及改进翻译词典。通过遵循本文档中的规范和流程，可以确保项目代码和文档的质量与一致性。

**文档版本**: 2.1.0  
**发布日期**: 2024-06-18  
**适用项目版本**: 1.8.99+

## 📋 目录

- [1. 如何参与贡献](#1-如何参与贡献)
- [2. 开发环境设置](#2-开发环境设置)
- [3. 代码规范](#3-代码规范)
- [4. 翻译词典更新](#4-翻译词典更新)
- [5. 提交 Pull Request](#5-提交-pull-request)
- [6. 报告问题](#6-报告问题)
- [7. 代码审查流程](#7-代码审查流程)
- [8. 发布流程](#8-发布流程)
- [9. 贡献者行为准则](#9-贡献者行为准则)

## 1. 如何参与贡献

GitHub i18n 项目欢迎各种形式的贡献，包括但不限于：

- **代码贡献**：修复 bug、实现新功能、优化性能
- **翻译贡献**：更新和改进翻译词典
- **文档贡献**：完善使用指南、API 文档等
- **测试贡献**：提交测试用例、报告问题
- **建议反馈**：提出新功能建议、改进建议

### 贡献者类型

- **新手贡献者**：适合修复小 bug、更新翻译词条
- **常规贡献者**：参与功能开发、代码优化
- **核心贡献者**：参与架构设计、代码审查

### 参与流程

1. 阅读本贡献指南
2. 选择感兴趣的任务（可以从 Issues 列表中选择）
3. Fork 项目仓库
4. 进行本地开发和测试
5. 提交 Pull Request
6. 参与代码审查讨论
7. 代码合并后，成为项目贡献者

## 2. 开发环境设置

### 2.1 环境要求

- **Node.js**: v14+  
- **npm**: v6+  
- **浏览器**: Chrome/Firefox/Edge/Safari  
- **用户脚本管理器**: Tampermonkey  
- **代码编辑器**: VS Code（推荐）

### 2.2 本地开发设置

1. **Fork 项目仓库**
   在 GitHub 上 Fork [sutchan/GitHub_i18n](https://github.com/sutchan/GitHub_i18n) 仓库到您的个人账号。

2. **克隆仓库**
   ```bash
   git clone https://github.com/YOUR_USERNAME/GitHub_i18n.git
   cd GitHub_i18n
   ```

3. **安装依赖**
   ```bash
   npm install
   cd utils
   npm install
   cd ..
   ```

4. **开发环境配置**
   - 复制 `.env.example` 文件为 `.env`（如果存在）
   - 根据需要修改配置项

5. **设置本地调试脚本**
   - 在 Tampermonkey 中，创建一个新的用户脚本
   - 复制 `src/index.js` 的内容，并修改 `@require` 路径指向本地文件
   - 或者使用构建脚本生成开发版本：
     ```bash
     npm run build:dev
     ```

### 2.3 构建命令

项目提供了以下构建命令：

```bash
# 构建项目（补丁版本）
npm run build

# 构建项目（主版本）
npm run build:major

# 构建项目（次版本）
npm run build:minor

# 构建开发版本
npm run build:dev

# 清理构建产物
npm run clean

# 验证构建
npm run validate

# 运行测试
npm run test
```

## 3. 代码规范

为了保持代码的一致性和可维护性，请遵循以下代码规范：

### 3.1 JavaScript 代码规范

- **语法**: 使用 ES6+ 语法
- **缩进**: 使用 2 个空格进行缩进
- **命名规范**:
  - 变量/函数: 小驼峰命名法 (`camelCase`)
  - 常量: 全大写加下划线 (`UPPER_SNAKE_CASE`)
  - 类名: 大驼峰命名法 (`PascalCase`)
- **注释**: 为所有函数添加 JSDoc 风格的注释
- **代码风格**: 遵循项目现有的代码风格

### 3.2 文件结构规范

请遵循项目现有的文件结构：

- `src/`: 源代码目录
  - `config.js`: 配置文件
  - `main.js`: 主逻辑文件
  - `translationCore.js`: 翻译核心逻辑
  - `dictionaries/`: 翻译词典目录
- `test/`: 测试文件目录
- `dist/`: 构建产物目录
- `docs/`: 文档目录

### 3.3 提交规范

提交信息应遵循以下格式：

```
<类型>: <简短描述>

[详细描述]

[相关 Issue 编号]
```

**提交类型**包括：
- `feat`: 新功能
- `fix`: 修复 bug
- `docs`: 文档更新
- `style`: 代码风格调整
- `refactor`: 代码重构
- `perf`: 性能优化
- `test`: 测试相关
- `chore`: 构建过程或辅助工具变动

## 4. 翻译词典更新

### 4.1 词典文件结构

翻译词典位于 `src/dictionaries/` 目录下，按功能模块分类：

- `common.js`: 通用翻译词典
- `codespaces.js`: Codespaces 相关翻译
- `explore.js`: Explore 页面翻译
- `index.js`: 翻译词典入口

### 4.2 添加新翻译

1. **确定正确的模块**：根据字符串出现的页面或功能，选择合适的词典文件
2. **添加翻译条目**：
   ```javascript
   // 格式：'原文': '译文'
   'Pull requests': '拉取请求',
   ```
3. **避免重复**：检查其他词典文件是否已包含该字符串
4. **注意特殊字符**：正确处理包含特殊字符的字符串

### 4.3 使用自动化工具

项目提供了自动化工具来辅助更新翻译词典：

```bash
cd utils
npm run server
```

启动后，访问 http://localhost:3000，使用界面进行以下操作：

- 添加需要抓取的 GitHub 页面
- 配置抓取规则和过滤条件
- 运行抓取并查看结果
- 自动更新翻译词典

### 4.4 翻译质量要求

- **准确性**: 确保翻译准确传达原文含义
- **一致性**: 相同术语在不同上下文中保持一致的翻译
- **专业性**: 技术术语应使用规范的中文翻译
- **简洁性**: 翻译应简洁明了，避免冗长

## 5. 提交 Pull Request

### 5.1 Pull Request 准备

1. **创建新分支**：为每个功能或修复创建独立的分支
   ```bash
   git checkout -b feature/your-feature-name
   # 或
   git checkout -b fix/your-fix-name
   ```

2. **代码修改**：进行代码修改并提交
   ```bash
   git add .
   git commit -m "feat: 添加新功能描述"
   ```

3. **推送分支**：将本地分支推送到远程仓库
   ```bash
   git push origin feature/your-feature-name
   ```

### 5.2 创建 Pull Request

1. 在 GitHub 上打开您的 Fork 仓库
2. 点击 "Pull request" 按钮
3. 填写 Pull Request 信息：
   - **标题**: 简洁描述修改内容
   - **描述**: 详细说明修改的目的、内容和影响
   - **相关 Issue**: 如果与某个 Issue 相关，请引用

### 5.3 Pull Request 检查清单

在提交 Pull Request 前，请确保：

- [ ] 代码遵循项目的代码规范
- [ ] 添加了必要的注释和文档
- [ ] 运行了测试并通过
- [ ] 构建项目无错误
- [ ] 提交信息符合规范
- [ ] 没有引入不必要的依赖

## 6. 报告问题

发现问题或有功能建议时，请通过 GitHub Issues 报告：

### 6.1 报告 Bug

提交 Bug 报告时，请包含以下信息：

1. **问题描述**: 清晰描述遇到的问题
2. **复现步骤**: 详细列出如何复现该问题
3. **期望行为**: 描述您期望的正常行为
4. **实际行为**: 描述实际发生的情况
5. **环境信息**: 
   - 浏览器类型和版本
   - 用户脚本管理器版本
   - 插件版本
   - 操作系统
6. **截图/错误日志**: 如果可能，提供截图或浏览器控制台错误日志

### 6.2 功能建议

提交功能建议时，请包含以下信息：

1. **功能描述**: 详细描述建议的功能
2. **使用场景**: 说明该功能的使用场景和价值
3. **实现思路**: 如果有，提供初步的实现思路
4. **相关参考**: 如有类似功能的参考，可以提供链接

## 7. 代码审查流程

### 7.1 审查标准

代码审查将基于以下标准进行评估：

- **功能实现**: 是否正确实现了所需功能
- **代码质量**: 是否遵循代码规范，代码是否清晰可读
- **性能考虑**: 是否考虑了性能优化
- **安全性**: 是否存在安全隐患
- **测试覆盖**: 是否有适当的测试覆盖
- **文档完善**: 是否更新了相关文档

### 7.2 审查反馈

审查者可能会提出以下类型的反馈：

- **必须修改**: 需要修复的严重问题
- **建议修改**: 可以考虑的改进建议
- **问题询问**: 关于代码实现的疑问
- **赞赏**: 对良好实现的肯定

### 7.3 回应审查反馈

收到审查反馈后：

1. 认真阅读所有反馈意见
2. 对有疑问的反馈提出问题
3. 根据反馈进行代码修改
4. 提交修改后的代码供再次审查
5. 感谢审查者的时间和建议

## 8. 发布流程

### 8.1 发布类型

项目使用语义化版本规范 (Semantic Versioning)：

- **MAJOR**: 不兼容的破坏性变更
- **MINOR**: 向下兼容的新功能
- **PATCH**: 向下兼容的问题修复

### 8.2 发布准备

发布新版本前，需要完成以下准备工作：

1. **更新版本号**: 使用构建命令自动更新版本号
   ```bash
   npm run build:minor  # 或 npm run build:patch, npm run build:major
   ```

2. **更新版本历史**: 在 `docs/10-版本历史/README.md` 中记录版本更新内容

3. **运行测试**: 确保所有测试通过
   ```bash
   npm test
   ```

4. **验证构建**: 验证构建产物的完整性
   ```bash
   npm run validate
   ```

### 8.3 发布步骤

1. **创建发布标签**:
   ```bash
   git tag vX.Y.Z
   git push origin vX.Y.Z
   ```

2. **在 GitHub 上创建发布**:
   - 打开项目仓库页面
   - 点击 "Releases" 标签
   - 点击 "Draft a new release"
   - 填写发布信息，包括版本号、发布说明和构建产物

## 9. 贡献者行为准则

为了维护一个友好、包容的社区环境，请所有贡献者遵循以下行为准则：

### 9.1 尊重与包容

- 尊重其他贡献者的观点和工作
- 包容不同的背景和经验
- 使用友好、专业的语言进行交流

### 9.2 建设性反馈

- 提供建设性的批评和反馈
- 专注于问题本身，而不是针对个人
- 认可他人的贡献和成就

### 9.3 协作精神

- 积极参与讨论和决策
- 乐于分享知识和经验
- 帮助新贡献者融入社区

### 9.4 责任担当

- 对自己的代码和贡献负责
- 及时响应问题和反馈
- 维护项目的质量和声誉

---

**文档维护信息**

- **最后更新**: 2024-06-18  
- **维护者**: Sut  
- **版本**: 2.1.0  

如有文档更新需求或发现文档错误，请联系文档维护者。