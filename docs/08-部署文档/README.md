# 08-部署文档

## 📋 目录说明

本目录包含GitHub中文翻译插件的部署和发布相关文档，详细记录版本更新历史、部署流程、发布规范和版本管理策略。本目录文档旨在帮助用户了解如何获取和更新插件，同时为开发者提供部署指南。

## 📁 包含文件

- **01-版本更新历史.md**: 详细的版本更新记录、变更内容和版本号说明

## 🚀 部署概述

GitHub中文翻译插件作为浏览器用户脚本，采用轻量级部署方式，确保用户能够便捷地获取和更新最新版本。插件的部署主要通过以下渠道：

1. **用户脚本管理器**: 通过 Tampermonkey、Violentmonkey、Greasemonkey 等工具一键安装
2. **直接下载**: 从 GitHub 仓库下载最新版本的用户脚本文件
3. **自动更新**: 插件内置自动更新检查机制，定期检查并提示新版本

## 🔄 部署流程

### 用户脚本安装流程

1. **前置条件**
   - 安装支持的用户脚本管理器扩展（推荐使用 Tampermonkey）
   - 主流浏览器（Chrome、Edge、Firefox、Safari 等）

2. **安装步骤**
   - 访问 [GitHub 仓库](https://github.com/sutchan/GitHub_i18n)
   - 点击 "安装最新版脚本" 链接
   - 用户脚本管理器将自动识别并提示安装
   - 点击 "安装" 按钮完成安装
   - 刷新任意 GitHub 页面，即可看到中文界面

3. **自动更新流程**
   - 插件会在每次页面加载时检查版本更新
   - 如发现新版本，会通过用户脚本管理器提示更新
   - 点击更新按钮即可升级到最新版本

### 开发者部署流程

1. **构建环境准备**
   - 安装 Node.js (推荐 v16+) 和 npm
   - 克隆代码仓库：`git clone https://github.com/sutchan/GitHub_i18n.git`
   - 进入项目目录：`cd GitHub_i18n`
   - 安装依赖：`npm install`

2. **版本升级与构建**
   - 升级补丁版本（bug修复）：`npm run build:patch`
   - 升级次版本（新功能）：`npm run build:minor`
   - 升级主版本（破坏性变更）：`npm run build:major`
   - 清理构建：`npm run clean`
   - 验证构建：`npm run validate`

3. **发布流程**
   - 运行测试确保功能正常：`npm test`
   - 验证构建产物的完整性
   - 更新版本历史文档 (`docs/08-部署文档/01-版本更新历史.md`)
   - 提交代码：`git add . && git commit -m "Release vX.Y.Z"`
   - 创建标签：`git tag vX.Y.Z`
   - 推送代码和标签：`git push && git push --tags`
   - 在 GitHub 上创建新的 Release 并上传构建产物

## 🏷️ 版本管理规范

### 版本号格式

采用语义化版本规范（Semantic Versioning）：MAJOR.MINOR.PATCH
- **MAJOR**: 不兼容的破坏性变更
- **MINOR**: 向下兼容的新功能
- **PATCH**: 向下兼容的问题修复

### 版本发布策略

- 补丁版本：根据需要随时发布，主要包含问题修复和小改进
- 次版本：每月发布一次，包含新功能和较大改进
- 主版本：重大架构变更或不兼容更新时发布

### 构建规则

- 每次构建前自动清理工作区缓存文件
- 所有代码文件同步更新版本号
- 构建产物自动生成版本信息和更新日志

## ✅ 部署验证

在发布新版本后，建议进行以下验证：

1. 确认用户脚本管理器能正确识别新版本
2. 测试自动更新功能是否正常工作
3. 验证新版本在不同浏览器环境下的兼容性
4. 检查翻译功能是否正常，无布局破坏

详细的版本更新历史请参考 [版本更新历史](01-版本更新历史.md) 文档。

## 📋 部署检查清单

### 发布前检查
- [ ] 所有测试通过
- [ ] 构建产物验证完成
- [ ] 版本历史文档已更新
- [ ] 代码已提交并创建标签
- [ ] 文档版本号与代码版本一致

### 发布后检查
- [ ] GitHub Release 创建成功
- [ ] 用户脚本管理器可检测到新版本
- [ ] 自动更新功能正常工作
- [ ] 各浏览器兼容性测试通过
- [ ] 翻译功能正常无布局问题

## 🔄 发布后监控与回滚

### 监控策略
- 监控 GitHub Issues 中的反馈
- 跟踪用户脚本管理器中的安装统计
- 定期检查浏览器兼容性状态

### 回滚策略
1. **发现严重问题时**：
   - 在 GitHub 上将问题版本标记为有问题
   - 准备上一个稳定版本的回滚包
   - 在版本历史中记录回滚原因

2. **执行回滚**：
   - 发布上一个稳定版本的更新
   - 通过项目主页和 Issues 通知用户
   - 提供手动回滚指南给需要的用户

## 🔖 版本信息

当前版本：1.8.60 - 最后更新：2024-06-02
作者：Sut
状态：活跃维护中