# é¡µé¢æ¨¡å¼æ”¯æŒä¸æ€§èƒ½ä¼˜åŒ–

## ğŸ“‹ æ¦‚è¿°

æœ¬æ–‡æ¡£è¯¦ç»†ä»‹ç»GitHubä¸­æ–‡ç¿»è¯‘æ’ä»¶ä¸­å®ç°çš„é¡µé¢æ¨¡å¼æ”¯æŒå’Œæ€§èƒ½ä¼˜åŒ–åŠŸèƒ½ï¼ŒåŒ…æ‹¬æ ¸å¿ƒæ–¹æ³•çš„å®ç°åŸç†ã€ä¼˜åŒ–ç­–ç•¥ä»¥åŠä½¿ç”¨è¯´æ˜ã€‚

## ğŸ” åŠŸèƒ½ç®€ä»‹

### é¡µé¢æ¨¡å¼æ”¯æŒ

é¡µé¢æ¨¡å¼ï¼ˆpageModeï¼‰åŠŸèƒ½å…è®¸ç¿»è¯‘å¼•æ“æ ¹æ®ä¸åŒçš„GitHubé¡µé¢ç±»å‹ï¼ˆå¦‚issues/pullRequestsã€wikiã€searchã€codespacesç­‰ï¼‰æ™ºèƒ½è°ƒæ•´ç¿»è¯‘è¡Œä¸ºï¼Œå®ç°æ›´ç²¾å‡†çš„å†…å®¹è¯†åˆ«å’Œæ›´é«˜æ•ˆçš„ç¿»è¯‘å¤„ç†ã€‚

### æ€§èƒ½ä¼˜åŒ–

é€šè¿‡å¼•å…¥ç¼“å­˜æœºåˆ¶ã€ä¼˜åŒ–DOMç›‘å¬é€»è¾‘ã€å®ç°é¡µé¢æ¨¡å¼ç‰¹å®šçš„é˜ˆå€¼å’Œè§„åˆ™ï¼Œæ˜¾è‘—æå‡äº†ç¿»è¯‘å¼•æ“çš„æ€§èƒ½å’Œå‡†ç¡®æ€§ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤§å‹å¤æ‚é¡µé¢ä¸Šçš„è¡¨ç°ã€‚

## ğŸ› ï¸ æ ¸å¿ƒå®ç°

### 1. isImportantElementæ–¹æ³•ä¼˜åŒ–

#### å®ç°åŸç†

ä¼˜åŒ–åçš„`isImportantElement`æ–¹æ³•èƒ½å¤Ÿæ ¹æ®é¡µé¢æ¨¡å¼åˆ¤æ–­å…ƒç´ çš„é‡è¦æ€§ï¼Œå¹¶ä½¿ç”¨ç¼“å­˜æœºåˆ¶æé«˜é‡å¤æ£€æµ‹æ•ˆç‡ï¼š

```javascript
/**
 * åˆ¤æ–­å…ƒç´ æ˜¯å¦ä¸ºé‡è¦å…ƒç´ ï¼Œéœ€è¦æ ¹æ®é¡µé¢æ¨¡å¼è¿›è¡Œä¼˜åŒ–åˆ¤æ–­
 * @param {HTMLElement} element - éœ€è¦åˆ¤æ–­çš„DOMå…ƒç´ 
 * @param {string} pageMode - å½“å‰é¡µé¢æ¨¡å¼ï¼ˆissues/pullRequests/wiki/search/codespacesç­‰ï¼‰
 * @returns {boolean} - è¿”å›å…ƒç´ æ˜¯å¦ä¸ºé‡è¦å…ƒç´ 
 */
function isImportantElement(element, pageMode = 'default') {
  // é¡µé¢æ¨¡å¼ç¼“å­˜é”®
  const cacheKey = `${pageMode}-${element.tagName}-${element.className}-${element.id}`;
  
  // æ£€æŸ¥ç¼“å­˜
  if (importantElementCache.has(cacheKey)) {
    return importantElementCache.get(cacheKey);
  }
  
  // åŸºäºé¡µé¢æ¨¡å¼çš„å…ƒç´ è·³è¿‡æ£€æŸ¥
  if (shouldSkipElementByPageMode(element, pageMode)) {
    importantElementCache.set(cacheKey, false);
    return false;
  }
  
  // é‡è¦å…ƒç´ åˆ¤æ–­é€»è¾‘...
  
  // é¡µé¢æ¨¡å¼ç‰¹å®šçš„é‡è¦å…ƒç´ åˆ¤æ–­
  if (pageMode === 'issues' || pageMode === 'pullRequests') {
    // Issueså’ŒPRé¡µé¢ç‰¹å®šè§„åˆ™
    if (element.matches('.js-issue-title, .js-comment-body, .timeline-comment-header')) {
      result = true;
    }
  } else if (pageMode === 'wiki') {
    // Wikié¡µé¢ç‰¹å®šè§„åˆ™
    if (element.matches('.wiki-content, .wiki-sidebar')) {
      result = true;
    }
  } else if (pageMode === 'search') {
    // æœç´¢é¡µé¢ç‰¹å®šè§„åˆ™
    if (element.matches('.search-result, .code-list-item, .issue-list-item')) {
      result = true;
    }
  } else if (pageMode === 'codespaces') {
    // Codespacesé¡µé¢ç‰¹å®šè§„åˆ™
    if (element.matches('.codespace-card, .codespace-details')) {
      result = true;
    }
  }
  
  // å­˜å‚¨åˆ°ç¼“å­˜
  importantElementCache.set(cacheKey, result);
  return result;
}
```

### 2. shouldIgnoreElementæ–¹æ³•ä¼˜åŒ–

#### å®ç°åŸç†

ä¼˜åŒ–åçš„`shouldIgnoreElement`æ–¹æ³•æ·»åŠ äº†é¡µé¢æ¨¡å¼ç‰¹å®šçš„å¿½ç•¥è§„åˆ™å’Œç¼“å­˜æ”¯æŒï¼š

```javascript
/**
 * åˆ¤æ–­æ˜¯å¦åº”è¯¥å¿½ç•¥æŸä¸ªå…ƒç´ ï¼ŒåŸºäºé¡µé¢æ¨¡å¼è¿›è¡Œæ™ºèƒ½åˆ¤æ–­
 * @param {HTMLElement} element - éœ€è¦åˆ¤æ–­çš„DOMå…ƒç´ 
 * @param {string} pageMode - å½“å‰é¡µé¢æ¨¡å¼
 * @returns {boolean} - è¿”å›æ˜¯å¦åº”è¯¥å¿½ç•¥è¯¥å…ƒç´ 
 */
function shouldIgnoreElement(element, pageMode = 'default') {
  // ç¼“å­˜æœºåˆ¶
  const cacheKey = `${pageMode}-ignore-${element.tagName}-${element.className}-${element.id}`;
  if (ignoreElementCache.has(cacheKey)) {
    return ignoreElementCache.get(cacheKey);
  }
  
  // åŸºäºé¡µé¢æ¨¡å¼çš„å…ƒç´ è·³è¿‡æ£€æŸ¥
  if (shouldSkipElementByPageMode(element, pageMode)) {
    ignoreElementCache.set(cacheKey, true);
    return true;
  }
  
  // åŸºç¡€å¿½ç•¥é€»è¾‘...
  
  // é¡µé¢æ¨¡å¼ç‰¹å®šçš„å¿½ç•¥è§„åˆ™
  if (pageMode === 'codespaces') {
    // Codespacesé¡µé¢ç‰¹å®šå¿½ç•¥è§„åˆ™
    if (element.matches('.terminal-output, .code-editor, .file-content')) {
      ignoreElementCache.set(cacheKey, true);
      return true;
    }
  } else if (pageMode === 'wiki') {
    // Wikié¡µé¢ç‰¹å®šå¿½ç•¥è§„åˆ™
    if (element.matches('.markdown-body pre, .highlight, .language-*')) {
      ignoreElementCache.set(cacheKey, true);
      return true;
    }
  } else if (pageMode === 'search') {
    // æœç´¢é¡µé¢ç‰¹å®šå¿½ç•¥è§„åˆ™
    if (element.matches('.blob-code, .file-match, .search-code-content')) {
      ignoreElementCache.set(cacheKey, true);
      return true;
    }
  }
  
  ignoreElementCache.set(cacheKey, result);
  return result;
}
```

### 3. isContentRelatedMutationæ–¹æ³•ä¼˜åŒ–

#### å®ç°åŸç†

ä¼˜åŒ–åçš„`isContentRelatedMutation`æ–¹æ³•å®ç°äº†åŸºäºé¡µé¢æ¨¡å¼çš„å†…å®¹å˜åŒ–åˆ¤æ–­ï¼š

```javascript
/**
 * åˆ¤æ–­å˜æ›´æ˜¯å¦ä¸å†…å®¹ç›¸å…³ï¼ŒåŸºäºé¡µé¢æ¨¡å¼è¿›è¡Œæ™ºèƒ½åˆ¤æ–­
 * @param {MutationRecord} mutation - DOMå˜æ›´è®°å½•
 * @param {string} pageMode - å½“å‰é¡µé¢æ¨¡å¼
 * @returns {boolean} - è¿”å›å˜æ›´æ˜¯å¦ä¸å†…å®¹ç›¸å…³
 */
function isContentRelatedMutation(mutation, pageMode = 'default') {
  // å­—ç¬¦æ•°æ®å˜åŒ–å¤„ç†
  if (mutation.type === 'characterData') {
    const oldValue = mutation.oldValue || '';
    const newValue = mutation.target.textContent;
    const textLength = Math.max(oldValue.length, newValue.length);
    const changeThreshold = getTextChangeThreshold(pageMode, textLength);
    
    // ä½¿ç”¨é¡µé¢æ¨¡å¼ç‰¹å®šçš„æ–‡æœ¬å˜åŒ–é˜ˆå€¼
    return Math.abs(oldValue.length - newValue.length) >= changeThreshold;
  }
  
  // å­èŠ‚ç‚¹å˜åŒ–å¤„ç†
  if (mutation.type === 'childList') {
    // åŸºäºé¡µé¢æ¨¡å¼çš„å­èŠ‚ç‚¹è¿‡æ»¤
    if (pageMode === 'issues' || pageMode === 'pullRequests') {
      // Issueså’ŒPRé¡µé¢å…³æ³¨çš„å˜åŒ–
      return mutation.addedNodes.length > 0 && Array.from(mutation.addedNodes).some(node => {
        return node.nodeType === 1 && (node.matches('.comment, .timeline-item, .review-comment'));
      });
    } else if (pageMode === 'wiki') {
      // Wikié¡µé¢å…³æ³¨çš„å˜åŒ–
      return mutation.addedNodes.length > 0 && Array.from(mutation.addedNodes).some(node => {
        return node.nodeType === 1 && (node.matches('.wiki-content, .page-history'));
      });
    } else if (pageMode === 'codespaces') {
      // Codespacesé¡µé¢å…³æ³¨çš„å˜åŒ–
      return mutation.addedNodes.length > 0 && Array.from(mutation.addedNodes).some(node => {
        return node.nodeType === 1 && (node.matches('.codespace-status, .terminal-output'));
      });
    } else if (pageMode === 'search') {
      // æœç´¢é¡µé¢å…³æ³¨çš„å˜åŒ–
      return mutation.addedNodes.length > 0 && Array.from(mutation.addedNodes).some(node => {
        return node.nodeType === 1 && (node.matches('.search-result, .pagination'));
      });
    }
  }
  
  return false;
}
```

### 4. detectImportantChangesæ–¹æ³•ä¼˜åŒ–

#### å®ç°åŸç†

ä¼˜åŒ–åçš„`detectImportantChanges`æ–¹æ³•ä½¿ç”¨é¡µé¢æ¨¡å¼ç‰¹å®šçš„æ€§èƒ½é…ç½®å’Œé˜ˆå€¼ï¼š

```javascript
/**
 * æ£€æµ‹é‡è¦çš„DOMå˜æ›´ï¼Œè§¦å‘ç¿»è¯‘
 * @param {MutationRecord[]} mutations - DOMå˜æ›´è®°å½•æ•°ç»„
 * @param {string} pageMode - å½“å‰é¡µé¢æ¨¡å¼
 * @returns {boolean} - è¿”å›æ˜¯å¦æ£€æµ‹åˆ°é‡è¦å˜æ›´
 */
function detectImportantChanges(mutations, pageMode = 'default') {
  // é¡µé¢æ¨¡å¼å­˜åœ¨æ€§æ£€æŸ¥
  const currentPageMode = pageMode || 'default';
  
  // æ€§èƒ½å‚æ•°
  const maxMutationCheck = getPageModeConfig(currentPageMode, 'maxMutationCheck', 100);
  
  // å¦‚æœå˜æ›´å¤ªå¤šï¼Œå¯èƒ½æ˜¯å¤§å‹æ¸²æŸ“ï¼Œç›´æ¥è§¦å‘ç¿»è¯‘
  if (mutations.length > maxMutationCheck) {
    return true;
  }
  
  // å¿«é€Ÿæ£€æŸ¥å°‘é‡å˜åŒ–
  if (mutations.length < 5) {
    return mutations.some(mutation => {
      return isContentRelatedMutation(mutation, currentPageMode);
    });
  }
  
  // è¯¦ç»†æ£€æŸ¥å­èŠ‚ç‚¹å˜åŒ–
  for (const mutation of mutations) {
    // ä½¿ç”¨é¡µé¢æ¨¡å¼ç‰¹å®šé˜ˆå€¼
    const textChangeThreshold = getTextChangeThreshold(currentPageMode);
    
    // å¤„ç†å­èŠ‚ç‚¹å˜åŒ–
    if (mutation.addedNodes.length > 0) {
      for (const node of mutation.addedNodes) {
        if (node.nodeType === 1) {
          // ä½¿ç”¨é¡µé¢æ¨¡å¼å‚æ•°
          if (isImportantElement(node, currentPageMode) || 
              hasTranslatableChildren(node, currentPageMode)) {
            return true;
          }
        }
      }
    }
  }
  
  return false;
}
```

## ğŸš€ è¾…åŠ©æ–¹æ³•å®ç°

### 1. getTextChangeThresholdæ–¹æ³•

```javascript
/**
 * è·å–åŸºäºé¡µé¢æ¨¡å¼çš„æ–‡æœ¬å˜åŒ–é˜ˆå€¼
 * @param {string} pageMode - å½“å‰é¡µé¢æ¨¡å¼
 * @param {number} textLength - æ–‡æœ¬é•¿åº¦ï¼ˆå¯é€‰ï¼‰
 * @returns {number} - è¿”å›æ–‡æœ¬å˜åŒ–é˜ˆå€¼
 */
function getTextChangeThreshold(pageMode = 'default', textLength = 0) {
  // é¡µé¢æ¨¡å¼ç‰¹å®šçš„é˜ˆå€¼é…ç½®
  const thresholds = {
    issues: 2, // Issuesé¡µé¢æ›´æ•æ„Ÿ
    pullRequests: 2,
    wiki: 5,    // Wikié¡µé¢éœ€è¦è¾ƒå¤§å˜åŒ–
    search: 3,  // æœç´¢ç»“æœé€‚ä¸­æ•æ„Ÿ
    codespaces: 5, // Codespacesé¡µé¢è¾ƒä¸æ•æ„Ÿ
    default: 3  // é»˜è®¤é˜ˆå€¼
  };
  
  // è·å–å¯¹åº”é¡µé¢æ¨¡å¼çš„é˜ˆå€¼
  const baseThreshold = thresholds[pageMode] || thresholds.default;
  
  // æ ¹æ®æ–‡æœ¬é•¿åº¦åŠ¨æ€è°ƒæ•´é˜ˆå€¼
  if (textLength > 1000) return baseThreshold + 3;
  if (textLength > 500) return baseThreshold + 2;
  if (textLength > 100) return baseThreshold + 1;
  
  return baseThreshold;
}
```

### 2. shouldSkipElementByPageModeæ–¹æ³•

```javascript
/**
 * æ ¹æ®é¡µé¢æ¨¡å¼åˆ¤æ–­æ˜¯å¦åº”è¯¥è·³è¿‡æŸä¸ªå…ƒç´ 
 * @param {HTMLElement} element - éœ€è¦åˆ¤æ–­çš„DOMå…ƒç´ 
 * @param {string} pageMode - å½“å‰é¡µé¢æ¨¡å¼
 * @returns {boolean} - è¿”å›æ˜¯å¦åº”è¯¥è·³è¿‡è¯¥å…ƒç´ 
 */
function shouldSkipElementByPageMode(element, pageMode = 'default') {
  // é€šç”¨è·³è¿‡è§„åˆ™
  if (element.nodeType !== 1) return true;
  if (element.hasAttribute('data-translated')) return true;
  if (element.tagName === 'SCRIPT' || element.tagName === 'STYLE') return true;
  
  // é¡µé¢æ¨¡å¼ç‰¹å®šè·³è¿‡è§„åˆ™
  const skipRules = {
    issues: ['.timeline-comment-actions', '.discussion-sidebar-item', '.reaction-list'],
    pullRequests: ['.diffbar', '.file-header', '.code-review-tools'],
    wiki: ['.toc', '.page-edit-menu', '.wiki-footer'],
    search: ['.search-filter', '.advanced-search', '.search-sort'],
    codespaces: ['.terminal', '.ide-toolbar', '.file-tree'],
    default: []
  };
  
  // æ£€æŸ¥å½“å‰é¡µé¢æ¨¡å¼çš„è·³è¿‡è§„åˆ™
  const rules = skipRules[pageMode] || skipRules.default;
  return rules.some(selector => element.matches(selector));
}
```

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–ç­–ç•¥

### 1. ç¼“å­˜æœºåˆ¶

- **å…ƒç´ é‡è¦æ€§ç¼“å­˜**ï¼šä½¿ç”¨`importantElementCache`ç¼“å­˜å·²åˆ¤æ–­çš„å…ƒç´ é‡è¦æ€§ç»“æœ
- **å…ƒç´ å¿½ç•¥ç¼“å­˜**ï¼šä½¿ç”¨`ignoreElementCache`ç¼“å­˜å·²åˆ¤æ–­çš„å…ƒç´ å¿½ç•¥ç»“æœ
- **ç¼“å­˜é”®è®¾è®¡**ï¼šç»“åˆé¡µé¢æ¨¡å¼ã€æ ‡ç­¾åã€ç±»åå’ŒIDåˆ›å»ºå”¯ä¸€ç¼“å­˜é”®
- **ç¼“å­˜å¤±æ•ˆ**ï¼šé¡µé¢å¯¼èˆªæˆ–æ¨¡å¼åˆ‡æ¢æ—¶æ¸…ç†ç›¸å…³ç¼“å­˜

### 2. é¡µé¢æ¨¡å¼ä¼˜åŒ–

- **å®šåˆ¶åŒ–é˜ˆå€¼**ï¼šä¸ºä¸åŒé¡µé¢æ¨¡å¼è®¾ç½®ç‰¹å®šçš„æ–‡æœ¬å˜åŒ–é˜ˆå€¼
- **æ¨¡å¼ç‰¹å®šè§„åˆ™**ï¼šä¸ºissuesã€wikiã€searchã€codespacesç­‰é¡µé¢å®ç°å®šåˆ¶åŒ–è§„åˆ™
- **å…ƒç´ è¿‡æ»¤**ï¼šåŸºäºé¡µé¢æ¨¡å¼æ™ºèƒ½è¿‡æ»¤ä¸éœ€è¦æ£€æŸ¥çš„å…ƒç´ 

### 3. åŠ¨æ€é˜ˆå€¼è°ƒæ•´

- **æ–‡æœ¬é•¿åº¦æ„ŸçŸ¥**ï¼šæ ¹æ®æ–‡æœ¬é•¿åº¦åŠ¨æ€è°ƒæ•´å˜åŒ–é˜ˆå€¼
- **å˜åŒ–é‡æ„ŸçŸ¥**ï¼šå°æ–‡æœ¬å˜åŒ–æ›´æ•æ„Ÿï¼Œå¤§æ–‡æœ¬éœ€è¦æ›´å¤§å˜åŒ–æ‰è§¦å‘ç¿»è¯‘

## ğŸ›¡ï¸ ä½¿ç”¨å»ºè®®

### 1. é¡µé¢æ¨¡å¼è¯†åˆ«

åœ¨è°ƒç”¨ç›¸å…³æ–¹æ³•æ—¶ï¼Œåº”ç¡®ä¿æ­£ç¡®è¯†åˆ«å’Œä¼ é€’å½“å‰é¡µé¢æ¨¡å¼ï¼š

```javascript
// é¡µé¢æ¨¡å¼è¯†åˆ«ç¤ºä¾‹
function determinePageMode() {
  const path = window.location.pathname;
  
  if (path.includes('/issues/') || path.includes('/pull/')) {
    return path.includes('/pull/') ? 'pullRequests' : 'issues';
  } else if (path.includes('/wiki/')) {
    return 'wiki';
  } else if (path.includes('/search/')) {
    return 'search';
  } else if (path.includes('/codespaces/')) {
    return 'codespaces';
  }
  
  return 'default';
}

// ä½¿ç”¨ç¤ºä¾‹
const pageMode = determinePageMode();
if (isImportantElement(element, pageMode)) {
  // å¤„ç†é‡è¦å…ƒç´ 
}
```

### 2. å†…ç½®æ€§èƒ½ç›‘æ§åŠŸèƒ½

æ’ä»¶å†…ç½®äº†å®Œæ•´çš„æ€§èƒ½ç›‘æ§åŠŸèƒ½ï¼Œå¯ä»¥é€šè¿‡é…ç½®ç•Œé¢æŸ¥çœ‹è¯¦ç»†çš„æ€§èƒ½æ•°æ®ï¼š

#### 2.1 é€šè¿‡é…ç½®ç•Œé¢æŸ¥çœ‹æ€§èƒ½ç›‘æ§

1. æ‰“å¼€æ’ä»¶é…ç½®ç•Œé¢
2. åˆ‡æ¢åˆ°"æ€§èƒ½ç›‘æ§"é€‰é¡¹å¡
3. æŸ¥çœ‹ä»¥ä¸‹æ€§èƒ½æŒ‡æ ‡ï¼š
   - ç¿»è¯‘å¯åŠ¨æ—¶é—´
   - å¤„ç†å…ƒç´ æ•°é‡
   - DOMæ“ä½œæ—¶é—´
   - ç½‘ç»œè¯·æ±‚æ—¶é—´
   - ç¼“å­˜å‘½ä¸­æ¬¡æ•°
   - ç¼“å­˜æœªå‘½ä¸­æ¬¡æ•°

#### 2.2 é€šè¿‡APIè·å–æ€§èƒ½æ•°æ®

æ’ä»¶æä¾›äº†ä»¥ä¸‹æ€§èƒ½ç›‘æ§APIï¼š

```javascript
// è·å–åŸºæœ¬æ€§èƒ½ç»Ÿè®¡æ•°æ®
const basicStats = window.translationCore.getPerformanceStats();
console.log('åŸºæœ¬æ€§èƒ½ç»Ÿè®¡:', basicStats);

// è·å–é«˜çº§æ€§èƒ½æ•°æ®ï¼ˆåŒ…å«è¯¦ç»†æŒ‡æ ‡ï¼‰
const advancedStats = window.translationCore.getPerformanceStats(true);
console.log('é«˜çº§æ€§èƒ½ç»Ÿè®¡:', advancedStats);

// å¯¼å‡ºæ€§èƒ½æ•°æ®ï¼ˆå¯ä¿å­˜ä¸ºJSONæ–‡ä»¶ï¼‰
const performanceData = window.translationCore.exportPerformanceData();
console.log('å¯¼å‡ºæ€§èƒ½æ•°æ®:', performanceData);

// é‡ç½®æ€§èƒ½æ•°æ®
window.translationCore.resetPerformanceData();
```

#### 2.3 æ€§èƒ½æ•°æ®ç»“æ„

```javascript
// åŸºæœ¬æ€§èƒ½ç»Ÿè®¡
{
  totalTime: 1234.56, // æ€»è€—æ—¶ï¼ˆæ¯«ç§’ï¼‰
  cacheHitRate: 0.85, // ç¼“å­˜å‘½ä¸­ç‡
  avgDomOperationTime: 1.23, // å¹³å‡DOMæ“ä½œæ—¶é—´
  avgNetworkRequestTime: 45.67 // å¹³å‡ç½‘ç»œè¯·æ±‚æ—¶é—´
}

// é«˜çº§æ€§èƒ½ç»Ÿè®¡
{
  translateStartTime: 1620000000000, // ç¿»è¯‘å¯åŠ¨æ—¶é—´
  elementsProcessed: 100, // å¤„ç†å…ƒç´ æ•°é‡
  domOperationTime: 123, // DOMæ“ä½œæ€»æ—¶é—´
  networkRequestTime: 456, // ç½‘ç»œè¯·æ±‚æ€»æ—¶é—´
  cacheHits: 85, // ç¼“å­˜å‘½ä¸­æ¬¡æ•°
  cacheMisses: 15, // ç¼“å­˜æœªå‘½ä¸­æ¬¡æ•°
  totalTime: 579, // æ€»è€—æ—¶
  cacheHitRate: 0.85, // ç¼“å­˜å‘½ä¸­ç‡
  avgDomOperationTime: 1.23, // å¹³å‡DOMæ“ä½œæ—¶é—´
  avgNetworkRequestTime: 30.4 // å¹³å‡ç½‘ç»œè¯·æ±‚æ—¶é—´
}

// å¯¼å‡ºæ€§èƒ½æ•°æ®
{
  timestamp: 1620000000000,
  pageMode: "default",
  stats: {
    // é«˜çº§æ€§èƒ½ç»Ÿè®¡æ•°æ®
  },
  userAgent: "Mozilla/5.0...",
  browserLanguage: "zh-CN"
}
```

#### 2.4 æ€§èƒ½ç›‘æ§äº‹ä»¶

æ’ä»¶ä¼šè‡ªåŠ¨è®°å½•ä»¥ä¸‹æ€§èƒ½äº‹ä»¶ï¼š

```javascript
// è®°å½•DOMæ“ä½œäº‹ä»¶
window.translationCore.recordPerformanceEvent('domOperation');

// è®°å½•ç½‘ç»œè¯·æ±‚äº‹ä»¶
window.translationCore.recordPerformanceEvent('networkRequest');

// è®°å½•ç¼“å­˜å‘½ä¸­äº‹ä»¶
window.translationCore.recordPerformanceEvent('cacheHit');

// è®°å½•ç¼“å­˜æœªå‘½ä¸­äº‹ä»¶
window.translationCore.recordPerformanceEvent('cacheMiss');
```

## ğŸ”® æœªæ¥ä¼˜åŒ–æ–¹å‘

1. **æ›´ç²¾ç»†çš„é¡µé¢æ¨¡å¼è¯†åˆ«**ï¼šåŒºåˆ†æ›´å¤šé¡µé¢å­ç±»å‹ï¼Œæä¾›æ›´ç²¾å‡†çš„è§„åˆ™
2. **è‡ªé€‚åº”é˜ˆå€¼**ï¼šåŸºäºå†å²æ•°æ®åŠ¨æ€è°ƒæ•´é˜ˆå€¼ï¼Œå®ç°æœºå™¨å­¦ä¹ ä¼˜åŒ–
3. **ä¼˜å…ˆçº§é˜Ÿåˆ—**ï¼šå®ç°å…ƒç´ å¤„ç†ä¼˜å…ˆçº§é˜Ÿåˆ—ï¼Œä¼˜å…ˆå¤„ç†é‡è¦å†…å®¹
4. **Web Workersæ”¯æŒ**ï¼šå°†å¤æ‚è®¡ç®—ç§»è‡³åå°çº¿ç¨‹ï¼Œé¿å…é˜»å¡ä¸»çº¿ç¨‹

## ğŸ“ ç‰ˆæœ¬ä¿¡æ¯

- **æ–‡æ¡£ç‰ˆæœ¬**ï¼š1.0.0
- **æœ€åæ›´æ–°**ï¼š2024-06-01
- **ç›¸å…³ä»£ç **ï¼š`pageMonitor.js`